<!DOCTYPE html>

<html lang="it">
<head>
<style>
.card-overlay {
  position: relative;
  width: 200px;
  overflow: hidden;
  border-radius: 10px;
  text-align: center;
}
.card-overlay img {
  width: 100%;
  display: block;
}
.card-overlay .info {
  position: absolute;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  color: #fff;
  width: 100%;
  padding: 10px;
  opacity: 0;
  transition: 0.3s ease-in-out;
  font-size: 0.9rem;
}
.card-overlay:hover .info {
  opacity: 1;
}

.card-container {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  justify-content: center;
}
.card {
  background-color: #fff;
  border: 1px solid #ccc;
  border-radius: 8px;
  width: 220px;
  padding: 0.5rem;
  text-align: center;
}
.card img {
  width: 100%;
  height: auto;
  border-radius: 6px;
}

</style>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ZARA FORMAGGI di Zara Maurizio</title>
<!-- Leaflet CSS -->
<link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet"/>
<style>
    :root {
      --verde-scuro: #2f4f2f;
      --verde-chiaro: #8fbc8f;
      --giallo-ocra: #c9a602;
      --caldo: #f4e2d8;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: var(--caldo);
      color: #333;
    }

    header {
      background-color: var(--verde-scuro);
      color: white;
      padding: 1rem;
      text-align: center;
    }

    .header-logo img {
      width: 100px;
      height: auto;
      margin-bottom: 0.5rem;
    }

    .header-title h1 {
      margin: 0;
    }

    .header-subtitle {
      margin-top: 0.5rem;
      font-size: 1.1rem;
    }

    nav {
      background-color: var(--verde-chiaro);
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }

    nav a {
      color: white;
      padding: 1rem;
      text-decoration: none;
      font-weight: bold;
      cursor: pointer;
    }

    nav a:hover {
      background-color: var(--giallo-ocra);
    }

    .section {
      padding: 2rem;
      display: none;
    }

    .section.active {
      display: block;
    }

    .gallery-placeholder {
      border: 2px dashed var(--verde-scuro);
      padding: 2rem;
      text-align: center;
      background-color: #fff;
    }

    footer {
      background-color: var(--verde-scuro);
      color: white;
      text-align: center;
      padding: 1rem;
    }

    .search-bar {
      margin: 1rem auto;
      text-align: center;
    }

    .search-bar input {
      padding: 0.5rem;
      width: 80%;
      max-width: 400px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    #map {
      width: 100%;
      max-width: 800px;
      height: 50vh;
      min-height: 300px;
      margin: 1rem auto;
      border: 2px solid var(--verde-scuro);
      border-radius: 8px;
    }

    .card-container {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
    }

    .card {
      background-color: #fff8ed;
      border: 1px solid #ccc;
      border-radius: 12px;
      width: 300px;
      padding: 1rem;
      text-align: center;
    }

    .card img {
      width: 100%;
      border-radius: 8px;
      height: auto;
    }

    .card h3 {
      margin-top: 0.5rem;
      color: #5d4037;
    }

    .card p {
      font-size: 0.95em;
      color: #4e342e;
    }

    @media (max-width: 600px) {
      nav a { padding: 0.5rem; }
      .card { width: 100%; }
    }
  
    #cart-button {
      position: fixed;
      top: 1rem;
      right: 1rem;
      background-color: var(--giallo-ocra);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      z-index: 1000;
    }

    #cart-section {
      position: fixed;
      top: 5rem;
      right: 1rem;
      background: white;
      border: 2px solid var(--verde-scuro);
      border-radius: 12px;
      width: 320px;
      max-height: 80vh;
      overflow-y: auto;
      padding: 1rem;
      display: none;
      z-index: 999;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }

    .cart-item button {
      margin: 0 0.25rem;
    }

    #checkout-form input, #checkout-form button {
      display: block;
      width: 100%;
      margin-top: 0.5rem;
      padding: 0.5rem;
    }

</style>
<style>
.section { display: none; }
.section.active { display: block; }
</style>
<style>
nav {
  background: #333;
  padding: 12px;
  text-align: center;
}
nav a {
  color: white;
  text-decoration: none;
  margin: 0 15px;
  font-weight: 500;
  font-size: 16px;
  transition: color 0.3s ease;
}
nav a:hover {
  color: #FFD700;
}
nav a.active-link {
  border-bottom: 2px solid #FFD700;
  padding-bottom: 4px;
}
.section {
  display: none;
  padding: 20px;
  animation: fadeIn 0.5s ease-in-out;
}
.section.active {
  display: block;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</head>
<body>
<header style="background-color: #2f4f2f; color: white; padding: 1rem 0; text-align: center;">
<div class="header-logo">
<img alt="ZARA FORMAGGI Logo" src="logo.png" style="width: 100px; height: auto; margin-bottom: 0.5rem;"/>
</div>
<div class="header-title">
<h1 style="margin: 0;">ZARA FORMAGGI</h1>
<p class="header-subtitle">di Zara Maurizio</p>
<p class="header-subtitle">Rivendita di prodotti tipici sardi e molto altro</p>
</div>
</header>
<nav style="background-color: #3f704d; display: flex; flex-wrap: wrap; justify-content: center;">
<a href="#home">üè† Home</a>
<a href="#chi-siamo">üë§ Chi siamo</a>
<a href="#dove">üìç Dove ci trovi</a>
<a href="#servizi">üõ†Ô∏è Servizi</a>
<a href="#galleria">üñºÔ∏è Galleria</a>
<a href="#shop">üßÄ Shop</a>
<a href="#contatti">üìû Contatti</a>
<a href="#carrello" id="menu-carrello">
  üõí Carrello (<span id="menu-cart-count">0</span>) ‚Äì ‚Ç¨<span id="menu-cart-total">0.00</span>
</a>
</nav>
<button id="cart-button" onclick="toggleCart()">üõí Carrello</button>
<div id="cart-section">
<h3>Il tuo carrello</h3>
<div id="cart-items"></div><button onclick="document.getElementById('ordine-form').scrollIntoView();" style="margin-top: 20px;">üì¶ Procedi all'ordine</button>
<hr/>
<form action="https://formspree.io/f/xpwrplgn" id="checkout-form" method="POST">
<label><input id="ritiro-loco" onchange="toggleSottovuoto()" type="checkbox"/> Ritiro in loco</label><br/>
<div id="sottovuoto-opzione" style="display:none; margin-top:6px;">
<label><input id="sottovuoto" onchange="aggiornaTotale()" type="checkbox"/> Richiedi sottovuoto (+‚Ç¨0.50)</label>
</div>
<input name="Nome" placeholder="Nome" required="" type="text"/>
<input name="Cognome" placeholder="Cognome" required="" type="text"/>
<input name="Telefono" placeholder="Numero di telefono" required="" type="tel"/>
<input name="Email" placeholder="Email" required="" type="email"/>
<input name="Indirizzo" placeholder="Indirizzo di consegna (se richiesto)" type="text"/>
<label><input name="Ritiro in loco" type="checkbox"/> Ritiro in loco presso il negozio</label>
<input id="ordine-dettaglio" name="Ordine" type="hidden"/>
<button onclick="prepareOrder()" type="submit">Invia Ordine</button>
<button onclick="downloadPDF()" type="button">Salva in PDF</button>
<div style="margin-top:1rem;">
<div id="paypal-button-container"></div>
<button onclick="alert('Simulazione Stripe')" type="button">Paga con Stripe</button>
</div>
<p><strong>Destinazione:</strong><br/>
<label><input checked="" id="destinazione-italia" name="destinazione" type="radio"/> Italia</label><br/>
<label><input id="destinazione-europa" name="destinazione" type="radio"/> Europa</label>
</p>
<button onclick="return inviaOrdine()" type="submit">Procedi al pagamento</button>
</form>
<div style="margin-top:10px;">
<label><input id="confezione-regalo" onchange="aggiornaTotale()" type="checkbox"/> Aggiungi confezione regalo (+‚Ç¨5)</label>
</div>
<div id="cart-total" style="margin-top:10px; font-weight:bold;"></div></div>
<nav>
</nav>
<div class="search-bar">
<input placeholder="Cerca nel sito..." type="text"/>
</div>
<main><section class="section" id="contatti" style="display: none;">
<h2>Contatti</h2>
<p>Per informazioni, ordini o richieste particolari, contattaci via email  <strong> info@zaraformaggi.com  </strong> </p>
</section><section class="section" id="servizi" style="display: none;">
<h2>I nostri servizi</h2>
<ul>
<li>Vendita al dettaglio di prodotti tipici sardi</li>
<li>Confezioni regalo personalizzate</li>
<li>Spedizioni in tutta Italia e Europa</li>
<li>Possibilit√† di mettere sottovuoto i prodotti </li>
<li>Regala un  Voucher "ZaraFormaggi " </li>
</ul>
</section><section class="section" id="chi-siamo" style="display: none;">
<h2>Chi siamo</h2>
<p>ZARA FORMAGGI nasce dalla passione per i sapori autentici della Sardegna. Fondata da Maurizio Zara, l‚Äôattivit√† si dedica alla selezione e vendita di prodotti tipici come formaggi, salumi, dolci e molto altro. Tradizione e qualit√† sono il nostro marchio.</p>
</section><section class="section active" id="home" style="display: block;">
<h2>Benvenuti!</h2>
<p>Visita il sito per scoprire i nostri prodotti. Offriamo una selezione di eccellenze enogastronomiche sarde, con attenzione alla qualit√†, alla tradizione e al gusto autentico.</p>
</section>
<section class="section" id="dove" style="display: none;">
<h2>Dove ci trovi</h2>
<p>Ci trovi in <strong>Via Gramsci, Iglesias (CI), Sardegna</strong>, presso il Mercato Civico Box N¬∞ 27.</p>
<h3>Orari di apertura</h3>
<ul>
<li>Luned√¨: Chiuso</li>
<li>Marted√¨: 8:00 - 13:00</li>
<li>Mercoled√¨: 8:00 - 13:00</li>
<li>Gioved√¨: 8:00 - 13:00</li>
<li>Venerd√¨: 7:30 - 13:00</li>
<li>Sabato: 7:30 - 13:00</li>
<li>Domenica: Chiuso</li>
</ul>
<div id="map"></div>
</section>
<section class="section" id="galleria" style="display: none;">
<h2>Galleria</h2>

<div class="card-container">
  <div class="card">
    <img src="img/biancoarrosto.png" alt="biancoarrosto.png" />
    <p>Biancoarrosto</p>
  </div>
  <div class="card">
    <img src="img/crablu.png" alt="crablu.png" />
    <p>Crablu</p>
  </div>
  <div class="card">
    <img src="img/cuor_di_latte.png" alt="cuor_di_latte.png" />
    <p>Cuor Di Latte</p>
  </div>
  <div class="card">
    <img src="img/cuore_sulcis.png" alt="cuore_sulcis.png" />
    <p>Cuore Sulcis</p>
  </div>
  <div class="card">
    <img src="img/gran_sirai.png" alt="gran_sirai.png" />
    <p>Gran Sirai</p>
  </div>
  <div class="card">
    <img src="img/nuraghe.png" alt="nuraghe.png" />
    <p>Nuraghe</p>
  </div>
  <div class="card">
    <img src="img/provola_orotelli.png" alt="provola_orotelli.png" />
    <p>Provola Orotelli</p>
  </div>
  <div class="card">
    <img src="img/sirai_gigante.png" alt="sirai_gigante.png" />
    <p>Sirai Gigante</p>
  </div>
  <div class="card">
    <img src="img/sulcitano.png" alt="sulcitano.png" />
    <p>Sulcitano</p>
  </div>
  <div class="card">
    <img src="img/vecchio_capraro.png" alt="vecchio_capraro.png" />
    <p>Vecchio Capraro</p>
  </div>
</div>
</section>
<section class="section" id="shop" style="display: none;">



  
<h2>üßÄ ü•ìShop</h2>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px;">
<div class="product">
<img src="Nuraghe.png" style="width:100%;border-radius:8px;"/><h4>Nuraghe</h4>
<input type="hidden" class="peso-forma" value="5" data-product="Nuraghe"><p>Pecorino stagionato dal gusto intenso, prodotto con latte ovino.</p>
<select id="nuraghe-qty">
<option data-price="5.0" value="1/8">1/8 - ‚Ç¨5.00</option>
<option data-price="9.5" value="1/4">1/4 - ‚Ç¨9.50</option>
<option data-price="18.5" value="1/2">1/2 - ‚Ç¨18.50</option>
<option data-price="35.0" value="1">1 - ‚Ç¨35.00</option>
</select>
<button onclick="aggiungiShop('Nuraghe', 'nuraghe-qty')">Aggiungi al carrello</button>
</div>
<div class="product">
<img src="Sirai gigante.png" style="width:100%;border-radius:8px;"/><h4>Sirai Gigante</h4>
<input type="hidden" class="peso-forma" value="5" data-product="Sirai Gigante"><p>Formaggio a lunga stagionatura, pasta dura, sapore ricco.</p>
<select id="sirai-gigante-qty">
<option data-price="6.0" value="1/8">1/8 - ‚Ç¨6.00</option>
<option data-price="11.5" value="1/4">1/4 - ‚Ç¨11.50</option>
<option data-price="22.5" value="1/2">1/2 - ‚Ç¨22.50</option>
<option data-price="43.0" value="1">1 - ‚Ç¨43.00</option>
</select>
<button onclick="aggiungiShop('Sirai Gigante', 'sirai-gigante-qty')">Aggiungi al carrello</button>
</div>
<div class="product">
<img src="Cuore.png" style="width:100%;border-radius:8px;"/><h4>Cuore del Sulcis</h4>
<input type="hidden" class="peso-forma" value="4" data-product="Cuore del Sulcis"><p>Pecorino semistagionato, dal cuore morbido e sapore equilibrato.</p>
<select id="cuore-del-sulcis-qty">
<option data-price="4.5" value="1/8">1/8 - ‚Ç¨4.50</option>
<option data-price="8.0" value="1/4">1/4 - ‚Ç¨8.00</option>
<option data-price="15.0" value="1/2">1/2 - ‚Ç¨15.00</option>
<option data-price="30.0" value="1">1 - ‚Ç¨30.00</option>
</select>
<button onclick="aggiungiShop('Cuore del Sulcis', 'cuore-del-sulcis-qty')">Aggiungi al carrello</button>
</div>
<div class="product">
<img src="Cuor di latte.png" style="width:100%;border-radius:8px;"/><h4>Cuor di Latte</h4>
<input type="hidden" class="peso-forma" value="3" data-product="Cuor di Latte"><p>Formaggio fresco e dolce, perfetto per spalmare o accompagnare miele.</p>
<select id="cuor-di-latte-qty">
<option data-price="5.2" value="1/8">1/8 - ‚Ç¨5.20</option>
<option data-price="9.8" value="1/4">1/4 - ‚Ç¨9.80</option>
<option data-price="18.9" value="1/2">1/2 - ‚Ç¨18.90</option>
<option data-price="36.0" value="1">1 - ‚Ç¨36.00</option>
</select>
<button onclick="aggiungiShop('Cuor di Latte', 'cuor-di-latte-qty')">Aggiungi al carrello</button>
</div>
<div class="product">
<img src="Vecchio Capraro.png" style="width:100%;border-radius:8px;"/><h4>Vecchio Capraro</h4>
<input type="hidden" class="peso-forma" value="5" data-product="Vecchio Capraro"><p>Caprino stagionato, forte e aromatico, 100% latte di capra.</p>
<select id="vecchio-capraro-qty">
<option data-price="5.3" value="1/8">1/8 - ‚Ç¨5.30</option>
<option data-price="10.5" value="1/4">1/4 - ‚Ç¨10.50</option>
<option data-price="20.0" value="1/2">1/2 - ‚Ç¨20.00</option>
<option data-price="39.0" value="1">1 - ‚Ç¨39.00</option>
</select>
<button onclick="aggiungiShop('Vecchio Capraro', 'vecchio-capraro-qty')">Aggiungi al carrello</button>
</div>
<div class="product">
<img src="Crablu.png" style="width:100%;border-radius:8px;"/><h4>Crablu</h4>
<input type="hidden" class="peso-forma" value="5" data-product="Crablu"><p>Formaggio erborinato con venature blu, sapore deciso e complesso.</p>
<select id="crablu-qty">
<option data-price="6.4" value="1/8">1/8 - ‚Ç¨6.40</option>
<option data-price="11.8" value="1/4">1/4 - ‚Ç¨11.80</option>
<option data-price="22.9" value="1/2">1/2 - ‚Ç¨22.90</option>
<option data-price="44.0" value="1">1 - ‚Ç¨44.00</option>
</select>
<button onclick="aggiungiShop('Crablu', 'crablu-qty')">Aggiungi al carrello</button>
</div>
<div class="product">
<img src="Sulcitano.png" style="width:100%;border-radius:8px;"/><h4>Sulcitano</h4>
<input type="hidden" class="peso-forma" value="4.5" data-product="Sulcitano"><p>Pecorino fresco tipico del Sulcis, ideale da tavola.</p>
<select id="sulcitano-qty">
<option data-price="4.8" value="1/8">1/8 - ‚Ç¨4.80</option>
<option data-price="9.2" value="1/4">1/4 - ‚Ç¨9.20</option>
<option data-price="17.5" value="1/2">1/2 - ‚Ç¨17.50</option>
<option data-price="34.0" value="1">1 - ‚Ç¨34.00</option>
</select>
<button onclick="aggiungiShop('Sulcitano', 'sulcitano-qty')">Aggiungi al carrello</button>
</div>
<div class="product">
<img src="Provolebiancheorotelli.png" style="width:100%;border-radius:8px;"/><h4>Provola di Orotelli</h4>
<input type="hidden" class="peso-forma" value="5" data-product="Provola di Orotelli"><p>Formaggio affumicato, dalla crosta dorata e pasta filante.</p>
<select id="provola-di-orotelli-qty">
<option data-price="5.6" value="1/8">1/8 - ‚Ç¨5.60</option>
<option data-price="10.6" value="1/4">1/4 - ‚Ç¨10.60</option>
<option data-price="20.5" value="1/2">1/2 - ‚Ç¨20.50</option>
<option data-price="40.0" value="1">1 - ‚Ç¨40.00</option>
</select>
<button onclick="aggiungiShop('Provola di Orotelli', 'provola-di-orotelli-qty')">Aggiungi al carrello</button>
</div>
<div class="product">
<img src="Gran Sirai.png" style="width:100%;border-radius:8px;"/><h4>Gran Sirai</h4>
<input type="hidden" class="peso-forma" value="12" data-product="Gran Sirai"><p>Formaggio a pasta dura e lunga stagionatura, per grattugia o tavola.</p>
<select id="gran-sirai-qty">
<option data-price="7.5" value="1/32">1/32 - ‚Ç¨7,5.00</option> 
<option data-price="15.0" value="1/16">1/16 - ‚Ç¨15.00</option>  
<option data-price="30.0" value="1/8">1/8 - ‚Ç¨30.00</option>
<option data-price="60.5" value="1/4">1/4 - ‚Ç¨60.50</option>
<option data-price="120.0" value="1/2">1/2 - ‚Ç¨120.00</option>
<option data-price="240.0" value="1">1 - ‚Ç¨240.00</option>
</select>
<button onclick="aggiungiShop('Gran Sirai', 'gran-sirai-qty')">Aggiungi al carrello</button>
</div>
<div class="product">
<img src="Bianc oarrosto .png" style="width:100%;border-radius:8px;"/><h4>Biancoarrosto del Sulcis</h4>
<input type="hidden" class="peso-forma" value="2" data-product="Biancoarrosto del Sulcis"><p>Formaggio bianco da griglia, dal sapore pieno e leggero.</p>
<select id="biancoarrosto-del-sulcis-qty">
<option data-price="5.1" value="1/8">1/8 - ‚Ç¨5.10</option>
<option data-price="9.9" value="1/4">1/4 - ‚Ç¨9.90</option>
<option data-price="19.0" value="1/2">1/2 - ‚Ç¨19.00</option>
<option data-price="37.0" value="1">1 - ‚Ç¨37.00</option>
</select>
<button onclick="aggiungiShop('Biancoarrosto del Sulcis', 'biancoarrosto-del-sulcis-qty')">Aggiungi al carrello</button>
</div>
</div>
</section>
</main>
<footer>
<p>¬© 2025 ZARA FORMAGGI di Zara Maurizio - Tutti i diritti riservati</p>
</footer>
<!-- Leaflet JS -->
<script src="https://www.paypal.com/sdk/js?client-id=sb¬§cy=EUR"></script>
<script>
      function prepareOrder() {
        let content = "";
        cart.forEach(item => {
          content += `${item.name} x${item.quantity} (‚Ç¨${(item.price * item.quantity).toFixed(2)})\n`;
        });
        document.getElementById("ordine-dettaglio").value = content;
      }

      paypal.Buttons({
        createOrder: function(data, actions) {
          const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0).toFixed(2);
          return actions.order.create({
            purchase_units: [{
              amount: { value: total }
            }]
          });
        },
        onApprove: function(data, actions) {
          return actions.order.capture().then(function(details) {
            alert('Pagamento completato da ' + details.payer.name.given_name);
            prepareOrder();
            document.getElementById("checkout-form").submit();
          });
        }
      }).render('#paypal-button-container');
    </script>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const cards = document.querySelectorAll('.card-overlay');
  cards.forEach(card => {
    card.addEventListener('click', function (e) {
      const infoBox = this.querySelector('.info');
      const alreadyVisible = infoBox.style.opacity === '1';
      // Nascondi tutte le info
      document.querySelectorAll('.card-overlay .info').forEach(i => i.style.opacity = '0');
      // Mostra solo se non gi√† visibile
      if (!alreadyVisible) {
        infoBox.style.opacity = '1';
        e.stopPropagation();
      }
    });
  });
  document.body.addEventListener('click', function () {
    document.querySelectorAll('.card-overlay .info').forEach(i => i.style.opacity = '0');
  });
});
</script>
<script>
function aggiornaPesoGenerico(selectId, labelId) {
  const pesoTesto = {
    "0.125": "1/8 di forma = circa 500g",
    "0.25":  "1/4 di forma = circa 1kg",
    "0.5":   "1/2 forma = circa 2kg",
    "1":     "1 forma intera = circa 4kg"
  };
  const valore = document.getElementById(selectId).value;
  document.getElementById(labelId).innerText = pesoTesto[valore];
}
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const sections = ["formaggi", "salumi", "altri-prodotti"];
  const navLinks = document.querySelectorAll(".menu-prodotti a");

  function highlightSection() {
    let scrollY = window.pageYOffset;
    sections.forEach(id => {
      const section = document.getElementById(id);
      if (section && scrollY >= section.offsetTop - 60) {
        navLinks.forEach(link => link.classList.remove("active"));
        const activeLink = document.querySelector(`.menu-prodotti a[href="#${id}"]`);
        if (activeLink) activeLink.classList.add("active");
      }
    });
  }

  window.addEventListener("scroll", highlightSection);
});
</script>
<style>
.menu-prodotti a.active {
  font-weight: bold;
  text-decoration: underline;
  color: #c00;
}
</style>
<script>
function inviaOrdine() {
  let total = 0;
  cart.forEach(item => total += item.price * item.quantity);
  if (document.getElementById("confezione-regalo")?.checked) total += 5;
  if (document.getElementById("sottovuoto")?.checked) total += 0.5;

  const europa = document.getElementById("destinazione-europa")?.checked;
  const minimo = europa ? 140 : 90;

  if (total < minimo) {
    alert("L'ordine minimo √® di ‚Ç¨" + minimo.toFixed(2) + (europa ? " per l'Europa." : " per l'Italia."));
    return false;
  }

  mostraRiepilogoOrdine();
  return false;
}
</script>
<section id="riepilogo-ordine" style="display:none; margin-top: 40px;">
<h2>üßæ Riepilogo Ordine</h2>
<div id="riepilogo-dettagli" style="margin-bottom: 20px;"></div>
<button onclick="finalizzaOrdine()">Conferma e Invia Ordine</button>
</section>
<script>
function mostraRiepilogoOrdine() {
  const div = document.getElementById("riepilogo-dettagli");
    const imageMap = {
    "nuraghe": "img/nuraghe.png",
    "sirai gigante": "img/sirai_gigante.png",
    "cuore del sulcis": "img/cuore_sulcis.png",
    "cuor di latte": "img/cuor_di_latte.png",
    "vecchio capraro": "img/vecchio_capraro.png",
    "crablu": "img/crablu.png",
    "sulcitano": "img/sulcitano.png",
    "provola di orotelli": "img/provola_orotelli.png",
    "gran sirai": "img/gran_sirai.png",
    "biancoarrosto del sulcis": "img/biancoarrosto.png"
  };
  let html = "<ul>";
  let total = 0;
  cart.forEach(item => {
    const subtot = item.price * item.quantity;
    total += subtot;
    const nome = item.name.toLowerCase().replace(/\s/g, "_").replace(/[^a-z0-9_]/g, "");
    const imgSrc = `img/${nome}.png`;
    html += `<li><img src="${imgSrc}" alt="${item.name}" style="height:40px; vertical-align:middle; margin-right:10px; border-radius:4px;"> ${item.name} x${item.quantity} = ‚Ç¨${subtot.toFixed(2)}</li>`;
  });
  if (document.getElementById("confezione-regalo")?.checked) {
    html += "<li>Confezione regalo = ‚Ç¨5.00</li>";
    total += 5;
  }
  if (document.getElementById("sottovuoto")?.checked) {
    html += "<li>Sottovuoto = ‚Ç¨0.50</li>";
    total += 0.5;
  }
  html += `</ul><strong>Totale: ‚Ç¨${total.toFixed(2)}</strong>`;
  div.innerHTML = html;
  document.getElementById("riepilogo-ordine").style.display = "block";
}

function finalizzaOrdine() {
  alert("Ordine confermato! Grazie per l'acquisto.");
  location.reload();  // simula invio e reset
}
</script>
<section class="section" id="carrello" style="display: none;">
<h2>üõí Il tuo carrello</h2>
<div id="cart-container"></div>
<div id="peso-totale" style="margin-top: 10px; font-weight: bold;"></div>
<div style="margin-top: 20px;">
<strong id="cart-total">Totale: ‚Ç¨0.00</strong>
<button onclick="proseguiOrdine()" style="margin-left: 20px;">Procedi all'acquisto</button>
</div>
<h3 style="text-align:right;">Totale: <span id="carrello-totale">‚Ç¨0.00</span></h3></section>
<section id="form-ordine" style="display:none; margin-top:40px;">
<h2>üì¶ Dati per la spedizione</h2>

<div style="margin: 20px 0; text-align: center;">
  <button type="button" onclick="toggleRitiroNegozio()" id="btn-ritiro"
    style="padding: 10px 20px; border: none; border-radius: 8px; background-color: #2f4f2f; color: white; font-weight: bold; cursor: pointer;">
    üö∂‚Äç‚ôÇÔ∏è Attiva Ritiro in Negozio
  </button>
</div>

<form onsubmit="submitOrdine(event)">
<label>Nome: <input id="nome" required="" type="text"/></label><br/>
<label>Cognome: <input id="cognome" required="" type="text"/></label><br/>
<label>Email: <input id="email" required="" type="email"/></label><br/>
<label>Telefono: <input id="telefono" required="" type="tel"/></label><br/>
<label>Indirizzo: <input id="indirizzo" required="" type="text"/></label><br/>
<label>CAP: <input id="cap" required="" type="text"/></label><br/>
<label>Citt√†: <input id="citta" required="" type="text"/></label><br/>
<label>Paese: <input id="paese" required="" type="text"/></label><br/><br/>
<button type="submit">Conferma Ordine</button>
</form>
<div id="invia-ordine-opzioni" style="margin-top: 20px; text-align: center;">
<button onclick="inviaOrdineEmail()" style="padding: 10px 20px; background: #007BFF; color: white; border: none; border-radius: 6px; margin-right: 10px; cursor: pointer;">
        üìß Invia ordine via Email
      </button>
<button onclick="inviaOrdineWhatsApp()" style="padding: 10px 20px; background: #25D366; color: white; border: none; border-radius: 6px; cursor: pointer;">
        üí¨ Invia ordine via WhatsApp
      </button>
</div>
</section>
<script>
let cart = [];

function addToCart(name, qtyLabel, price) {
  cart.push({ name, qtyLabel, price, quantity: 1 });
  updateCart();
}

function updateCart() {
  const pesoKgMap = {
    "1/8": 0.5,
    "1/4": 1.0,
    "1/2": 2.0,
    "1":   4.0
  };

  const pesoStimato = {
    "1/8": "‚âà 500g",
    "1/4": "‚âà 1kg",
    "1/2": "‚âà 2kg",
    "1":   "‚âà 4kg"
  };

  const cartContainer = document.getElementById("cart-container");
  const cartTotal = document.getElementById("cart-total");
  let total = 0;
  cartContainer.innerHTML = "";

  cart.forEach((item, i) => {
    const div = document.createElement("div");
    div.style = "padding: 10px; border-bottom: 1px solid #ccc;";
    div.innerHTML = `
      <strong>${item.name}</strong><br>
      Formato: ${item.qtyLabel} (${pesoStimato[item.qtyLabel] || ""}) ‚Äì Quantit√†: 
      <button onclick="decrementItem(${i})">-</button> 
      ${item.quantity} 
      <button onclick="incrementItem(${i})">+</button><br>
      Prezzo: ‚Ç¨${(item.price * item.quantity).toFixed(2)}
      <button onclick="removeItem(${i})" style="margin-left: 10px;">Rimuovi</button>
    `;
    cartContainer.appendChild(div);
    total += item.price * item.quantity;
  });

  cartTotal.innerText = "Totale: ‚Ç¨" + total.toFixed(2);

  const countEl = document.getElementById("menu-cart-count");
  const totalEl = document.getElementById("menu-cart-total");
  if (countEl && totalEl) {
    countEl.innerText = cart.reduce((sum, item) => sum + item.quantity, 0);
    totalEl.innerText = total.toFixed(2);
  }

  const fixedBtn = document.getElementById("cart-button");
  if (fixedBtn) {
    fixedBtn.innerText = `üõí Carrello (${cart.length}) ‚Äì Totale: ‚Ç¨${total.toFixed(2)}`;
  }

  const bottomTotal = document.getElementById("carrello-totale");
  if (bottomTotal) {
    bottomTotal.innerText = "‚Ç¨" + total.toFixed(2);
  }


  let pesoTotaleKg = 0;
  cart.forEach(item => {
    const pesoKg = pesoKgMap[item.qtyLabel] || 0;
    pesoTotaleKg += pesoKg * item.quantity;
  });
  const pesoTotDiv = document.getElementById("peso-totale");
  if (pesoTotDiv) {
    pesoTotDiv.innerText = "Peso totale: " + pesoTotaleKg.toFixed(2) + " kg";
  }

}

function removeItem(index) {
  cart.splice(index, 1);
  updateCart();
}

function proseguiOrdine() {
  document.getElementById("form-ordine").style.display = "block";
  document.getElementById("form-ordine").scrollIntoView({ behavior: 'smooth' });
}

function submitOrdine(event) {
  event.preventDefault();
  alert("Ordine inviato! Grazie per l'acquisto.");
  cart = [];
  updateCart();
  document.getElementById("form-ordine").style.display = "none";
}
</script>
<script>

function incrementItem(index) {
  cart[index].quantity += 1;
  updateCart();
}

function decrementItem(index) {
  if (cart[index].quantity > 1) {
    cart[index].quantity -= 1;
  } else {
    cart.splice(index, 1); // rimuove l'elemento se quantit√† scende sotto 1
  }
  updateCart();
}


function aggiungiShop(nome, selectId) {
  const sel = document.getElementById(selectId);
  const formato = sel.value;
  const prezzo = parseFloat(sel.options[sel.selectedIndex].dataset.price);
  addToCart(nome, formato, prezzo);
}
</script>
<script>
function inviaOrdineEmail() {
  const messaggio = generaMessaggioOrdine();
  const mailtoLink = `mailto:titolare@email.it?subject=Nuovo Ordine Zara&body=${encodeURIComponent(messaggio)}`;
  window.location.href = mailtoLink;
}

function inviaOrdineWhatsApp() {
  const messaggio = generaMessaggioOrdine();
  const numero = "393123456789"; // Inserisci il tuo numero in formato internazionale
  const link = `https://wa.me/${numero}?text=${encodeURIComponent(messaggio)}`;
  window.open(link, '_blank');
}

function generaMessaggioOrdine() {
  let messaggio = "üßÄ *Nuovo ordine Zara Formaggi*\n\n";
  cart.forEach((item, i) => {
    messaggio += `‚Ä¢ ${item.name} - ${item.qtyLabel} - ‚Ç¨${item.price.toFixed(2)}\n`;
  });

  const totale = cart.reduce((sum, item) => sum + item.price, 0);
  messaggio += `\nüí∂ Totale: ‚Ç¨${totale.toFixed(2)}\n\n`;

  messaggio += "üì¶ Dati cliente:\n";
  messaggio += `Nome: ${document.getElementById("nome").value}\n`;
  messaggio += `Cognome: ${document.getElementById("cognome").value}\n`;
  messaggio += `Email: ${document.getElementById("email").value}\n`;
  messaggio += `Telefono: ${document.getElementById("telefono").value}\n`;
  messaggio += `Indirizzo: ${document.getElementById("indirizzo").value}, ${document.getElementById("cap").value}, ${document.getElementById("citta").value}, ${document.getElementById("paese").value}`;
  return messaggio;
}
</script>



<script>
function mostraSezione(id) {
  document.querySelectorAll(".section").forEach(sec => {
    sec.classList.remove("active");
    sec.style.display = "none";
  });
  const sezioneAttiva = document.getElementById(id);
  if (sezioneAttiva) {
    sezioneAttiva.classList.add("active");
    sezioneAttiva.style.display = "block";
    if (id === 'carrello') aggiornaCarrello?.();
  }
}
document.addEventListener("DOMContentLoaded", () => {
  const hash = window.location.hash.replace("#", "") || "home";
  mostraSezione(hash);
  document.querySelectorAll("nav a").forEach(link => {
    link.addEventListener("click", e => {
      e.preventDefault();
      const id = link.getAttribute("href").replace("#", "");
      history.pushState(null, "", `#${id}`);
      mostraSezione(id);
    });
  });
});
</script>

<script>
function toggleRitiroNegozio() {
  const ritiroCheckbox = document.querySelector('input[name="Ritiro in loco"]');
  const btn = document.getElementById("btn-ritiro");
  if (!ritiroCheckbox || !btn) return;
  const attivo = ritiroCheckbox.checked = !ritiroCheckbox.checked;
  btn.innerText = attivo ? "‚úÖ Ritiro in Negozio Attivo" : "üö∂‚Äç‚ôÇÔ∏è Attiva Ritiro in Negozio";
  btn.style.backgroundColor = attivo ? "#4caf50" : "#2f4f2f";
}
</script>

</body>
</html>

<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".product").forEach(prod => {
    const pesoInput = prod.querySelector(".peso-forma");
    const pesoForma = parseFloat(pesoInput?.value || 4);
    const select = prod.querySelector("select");
    if (!select) return;

    select.querySelectorAll("option").forEach(opt => {
      const frazione = opt.value.trim();
      const frazioni = { "1/8": 1/8, "1/4": 1/4, "1/2": 1/2, "1": 1 };
      const pesoCalcolato = (pesoForma * (frazioni[frazione] || 0)).toFixed(2);
      const prezzo = opt.dataset.price;
      opt.dataset.pesounitario = pesoCalcolato;
      opt.textContent = `${frazione} - ‚Ç¨${prezzo} (${pesoCalcolato} kg)`;
    });
  });
});
</script>
