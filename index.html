<!DOCTYPE html>

<html lang="it">
<head>
<style>
.indicatore-tacche .tacca {
  transition: background-color 0.3s ease;
}
.indicatore-tacche[data-disp*='low'] .tacca.attiva {
  background-color: red;
}

.card-overlay {
  position: relative;
  width: 200px;
  overflow: hidden;
  border-radius: 10px;
  text-align: center;
}
.card-overlay img {
  width: 100%;
  display: block;
}
.card-overlay .info {
  position: absolute;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  color: #fff;
  width: 100%;
  padding: 10px;
  opacity: 0;
  transition: 0.3s ease-in-out;
  font-size: 0.9rem;
}
.card-overlay:hover .info {
  opacity: 1;
}

.card-container {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  justify-content: center;
}
.card {
  background-color: #fff;
  border: 1px solid #ccc;
  border-radius: 8px;
  width: 220px;
  padding: 0.5rem;
  text-align: center;
}
.card img {
  width: 100%;
  height: auto;
  border-radius: 6px;
}

</style>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ZARA FORMAGGI di Zara Maurizio</title>
<!-- Leaflet CSS -->
<style>
.indicatore-tacche .tacca {
  transition: background-color 0.3s ease;
}
.indicatore-tacche[data-disp*='low'] .tacca.attiva {
  background-color: red;
}

    :root {
      --verde-scuro: #2f4f2f;
      --verde-chiaro: #8fbc8f;
      --giallo-ocra: #c9a602;
      --caldo: #f4e2d8;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: var(--caldo);
      color: #333;
    }

    header {
      background-color: var(--verde-scuro);
      color: white;
      padding: 1rem;
      text-align: center;
    }

    .header-logo img {
      width: 100px;
      height: auto;
      margin-bottom: 0.5rem;
    }

    .header-title h1 {
      margin: 0;
    }

    .header-subtitle {
      margin-top: 0.5rem;
      font-size: 1.1rem;
    }

    nav {
      background-color: var(--verde-chiaro);
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }

    nav a {
      color: white;
      padding: 1rem;
      text-decoration: none;
      font-weight: bold;
      cursor: pointer;
    }

    nav a:hover {
      background-color: var(--giallo-ocra);
    }

    .section {
      padding: 2rem;
      display: none;
    }

    .section.active {
      display: block;
    }

    .gallery-placeholder {
      border: 2px dashed var(--verde-scuro);
      padding: 2rem;
      text-align: center;
      background-color: #fff;
    }

    footer {
      background-color: var(--verde-scuro);
      color: white;
      text-align: center;
      padding: 1rem;
    }

    .search-bar {
      margin: 1rem auto;
      text-align: center;
    }

    .search-bar input {
      padding: 0.5rem;
      width: 80%;
      max-width: 400px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    #map {
      width: 100%;
      max-width: 800px;
      height: 50vh;
      min-height: 300px;
      margin: 1rem auto;
      border: 2px solid var(--verde-scuro);
      border-radius: 8px;
    }

    .card-container {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
    }

    .card {
      background-color: #fff8ed;
      border: 1px solid #ccc;
      border-radius: 12px;
      width: 300px;
      padding: 1rem;
      text-align: center;
    }

    .card img {
      width: 100%;
      border-radius: 8px;
      height: auto;
    }

    .card h3 {
      margin-top: 0.5rem;
      color: #5d4037;
    }

    .card p {
      font-size: 0.95em;
      color: #4e342e;
    }

    @media (max-width: 600px) {
      nav a { padding: 0.5rem; }
      .card { width: 100%; }
    }
  
    #cart-button {
      position: fixed;
      top: 1rem;
      right: 1rem;
      background-color: var(--giallo-ocra);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      z-index: 1000;
    }

    #cart-section {
      position: fixed;
      top: 5rem;
      right: 1rem;
      background: white;
      border: 2px solid var(--verde-scuro);
      border-radius: 12px;
      width: 320px;
      max-height: 80vh;
      overflow-y: auto;
      padding: 1rem;
      display: none;
      z-index: 999;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }

    .cart-item button {
      margin: 0 0.25rem;
    }

    #checkout-form input, #checkout-form button {
      display: block;
      width: 100%;
      margin-top: 0.5rem;
      padding: 0.5rem;
    }

</style>
<style>
.indicatore-tacche .tacca {
  transition: background-color 0.3s ease;
}
.indicatore-tacche[data-disp*='low'] .tacca.attiva {
  background-color: red;
}

.section { display: none; }
.section.active { display: block; }
</style>
<style>
.indicatore-tacche .tacca {
  transition: background-color 0.3s ease;
}
.indicatore-tacche[data-disp*='low'] .tacca.attiva {
  background-color: red;
}

nav {
  background: #333;
  padding: 12px;
  text-align: center;
}
nav a {
  color: white;
  text-decoration: none;
  margin: 0 15px;
  font-weight: 500;
  font-size: 16px;
  transition: color 0.3s ease;
}
nav a:hover {
  color: #FFD700;
}
nav a.active-link {
  border-bottom: 2px solid #FFD700;
  padding-bottom: 4px;
}
.section {
  display: none;
  padding: 20px;
  animation: fadeIn 0.5s ease-in-out;
}
.section.active {
  display: block;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
<style>
.indicatore-tacche .tacca {
  transition: background-color 0.3s ease;
}
.indicatore-tacche[data-disp*='low'] .tacca.attiva {
  background-color: red;
}

@media (max-width: 768px) {
  #cart-sidebar { width: 350px !important; }
  #cart-sidebar.open {
    right: 0 !important;
  }
}
</style>
<style>
.indicatore-tacche .tacca {
  transition: background-color 0.3s ease;
}
.indicatore-tacche[data-disp*='low'] .tacca.attiva {
  background-color: red;
}

.indicatore-tacche {
  display: flex;
  gap: 2px;
  margin-top: 4px;
}
.indicatore-tacche .tacca {
  width: 6px;
  height: 16px;
  border-radius: 2px;
  background-color: gray;
}
.indicatore-tacche .tacca.attiva {
  background-color: green;
}
</style>
<style>
.shop-container {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
  margin-top: 2rem;
}
.product-card {
  width: 300px;
  border: 2px solid #d9d9d9;
  border-radius: 12px;
  padding: 16px;
  box-shadow: 0 0 10px rgba(0,0,0,0.05);
  background-color: #ffffff;
}
.product-card h3 {
  margin-top: 0;
}
.scelte-formati {
  margin-top: 12px;
}
</style>


<style>
.tooltip {
  position: relative;
  display: inline-block;
}
.tooltip .tooltip-text {
  visibility: hidden;
  width: max-content;
  max-width: 240px;
  background-color: #333;
  color: #fff;
  text-align: left;
  border-radius: 6px;
  padding: 8px;
  position: absolute;
  z-index: 1;
  bottom: 125%;
  left: 0;
  opacity: 0;
  transition: opacity 0.3s;
  font-size: 13px;
}
.tooltip:hover .tooltip-text {
  visibility: visible;
  opacity: 1;
}
</style>

</head>
<body>
<!-- Bottone carrello fisso -->
<div id="floating-cart" onclick="toggleCartSidebar()" style="position:fixed;top:20px;right:20px;background:#c9a602;color:#fff;padding:15px 20px;border-radius:50px;font-size:16px;font-weight:bold;box-shadow:0 2px 8px rgba(0,0,0,0.3);z-index:9999;cursor:pointer;" title="Clicca per vedere il carrello">
  üõí Carrello: <span id="floating-total">‚Ç¨0.00</span>
</div>
<header style="background-color: #2f4f2f; color: white; padding: 1rem 0; text-align: center;">
<div class="header-logo">
<img alt="ZARA FORMAGGI Logo" src="logo.png" style="width: 100px; height: auto; margin-bottom: 0.5rem;"/>
</div>
<div class="header-title">
<h1 style="margin: 0;">ZARA FORMAGGI</h1>
<p class="header-subtitle">di Zara Maurizio</p>
<p class="header-subtitle">Rivendita di prodotti tipici sardi e molto altro</p>
</div>
</header>
<nav style="background-color: #3f704d; display: flex; flex-wrap: wrap; justify-content: center;">
<a href="#home">üè† Home</a>
<a href="#chi-siamo">üë§ Chi siamo</a>
<a href="#dove">üìç Dove ci trovi</a>
<a href="#servizi">üõ†Ô∏è Servizi</a>
<a href="#galleria">üñºÔ∏è Galleria</a>
<a href="#shop">üßÄ ü•ì Shop</a>
<a href="#contatti">üìû Contatti</a>
<a href="#carrello" id="menu-carrello">
  üõí Carrello (<span id="menu-cart-count">0</span>) ‚Äì ‚Ç¨<span id="menu-cart-total">0.00</span>
</a>
</nav>
<div id="cart-section">
<h3>Il tuo carrello</h3>
<div id="cart-items"></div><button onclick="document.getElementById('ordine-form').scrollIntoView();" style="margin-top: 20px;">üì¶ Procedi all'ordine</button>
<hr/>
<form action="https://formspree.io/f/xpwrplgn" id="checkout-form" method="POST">
<label><input id="ritiro-loco" onchange="toggleSottovuoto()" type="checkbox"/> Ritiro in loco</label><br/>
<div id="sottovuoto-opzione" style="display:none; margin-top:6px;">
<label><input id="sottovuoto" onchange="aggiornaTotale()" type="checkbox"/> Richiedi sottovuoto (+‚Ç¨0.50)</label>
</div>
<input name="Nome" placeholder="Nome" required="" type="text"/>
<input name="Cognome" placeholder="Cognome" required="" type="text"/>
<input name="Telefono" placeholder="Numero di telefono" required="" type="tel"/>
<input name="Email" placeholder="Email" required="" type="email"/>
<input name="Indirizzo" placeholder="Indirizzo di consegna (se richiesto)" type="text"/>
<label><input name="Ritiro in loco" type="checkbox"/> Ritiro in loco presso il negozio</label>
<input id="ordine-dettaglio" name="Ordine" type="hidden"/>
<button onclick="prepareOrder()" type="submit">Invia Ordine</button>
<button onclick="downloadPDF()" type="button">Salva in PDF</button>
<div style="margin-top:1rem;">
<div id="paypal-button-container"></div>
<button onclick="alert('Simulazione Stripe')" type="button">Paga con Stripe</button>
</div>
<p><strong>Destinazione:</strong><br/>
<label><input checked="" id="destinazione-italia" name="destinazione" type="radio"/> Italia</label><br/>
<label><input id="destinazione-europa" name="destinazione" type="radio"/> Europa</label>
</p>
<button onclick="return inviaOrdine()" type="submit">Procedi al pagamento</button>
</form>
<div style="margin-top:10px;">
<label><input id="confezione-regalo" onchange="aggiornaTotale()" type="checkbox"/> Aggiungi confezione regalo (+‚Ç¨5)</label>
</div>
<div id="cart-total" style="margin-top:10px; font-weight:bold;"></div></div>
<nav>
</nav>
<main><section class="section" id="contatti" style="display: none;">
<h2>Contatti</h2>
<p>Per informazioni, ordini o richieste particolari, contattaci via email  <strong> info@zaraformaggi.com  </strong> </p>
</section><section class="section" id="servizi" style="display: none;">
<h2>I nostri servizi</h2>
<ul>
<li>Vendita al dettaglio di prodotti tipici sardi</li>
<li>Confezioni regalo personalizzate</li>
<li>Spedizioni in tutta Italia e Europa</li>
<li>Possibilit√† di mettere sottovuoto i prodotti </li>
<li>Regala un  Voucher "ZaraFormaggi " </li>
</ul>
</section><section class="section" id="chi-siamo" style="display: none;">
<h2>Chi siamo</h2>
<p>ZARA FORMAGGI nasce dalla passione per i sapori autentici della Sardegna. Fondata da Maurizio Zara, l‚Äôattivit√† si dedica alla selezione e vendita di prodotti tipici come formaggi, salumi, dolci e molto altro. Tradizione e qualit√† sono il nostro marchio.</p>
</section><section class="section active" id="home" style="display: block;">
<h2>Benvenuti!</h2>
<p>Visita il sito per scoprire i nostri prodotti. Offriamo una selezione di eccellenze enogastronomiche sarde, con attenzione alla qualit√†, alla tradizione e al gusto autentico.</p>
</section>
<section class="section" id="dove" style="display: none;">
<h2>Dove ci trovi</h2>
<p>Ci trovi in <strong>Via Gramsci, Iglesias (CI), Sardegna</strong>, presso il Mercato Civico Box N¬∞ 27.</p>
<h3>Orari di apertura</h3>
<ul>
<li>Luned√¨: Chiuso</li>
<li>Marted√¨: 8:00 - 13:00</li>
<li>Mercoled√¨: 8:00 - 13:00</li>
<li>Gioved√¨: 8:00 - 13:00</li>
<li>Venerd√¨: 7:30 - 13:00</li>
<li>Sabato: 7:30 - 13:00</li>
<li>Domenica: Chiuso</li>
</ul>
<div id="map"></div>
<div style="text-align: center; margin-top: 10px;">
<a href="https://www.google.com/maps?q=39.3117602,8.5351056" style="display: inline-block; padding: 10px 20px; background: #3367d6; color: white; text-decoration: none; border-radius: 8px; font-weight: bold;" target="_blank">
    üìç Apri in Google Maps
  </a>
</div>
</section>
<section class="section" id="galleria" style="display: none;">
<h2>Galleria</h2>
<div class="card-container">
<div class="card">
<img alt="biancoarrosto.png" src="biancoarrosto.png"/>
<p>Biancoarrosto</p>
</div>
<div class="card">
<img alt="crablu.png" src="crablu.png"/>
<p>Crablu</p>
</div>
<div class="card">
<img alt="cuor_di_latte.png" src="cuor_di_latte.png"/>
<p>Cuor Di Latte</p>
</div>
<div class="card">
<img alt="cuore_sulcis.png" src="cuore.png"/>
<p>Cuore Sulcis</p>
</div>
<div class="card">
<img alt="gran_sirai.png" src="gran_sirai.png"/>
<p>Gran Sirai</p>
</div>
<div class="card">
<img alt="nuraghe.png" src="nuraghe.png"/>
<p>Nuraghe</p>
</div>
<div class="card">
<img alt="provola_orotelli.png" src="provola_orotelli.png"/>
<p>Provola Orotelli</p>
</div>
<div class="card">
<img alt="sirai_gigante.png" src="sirai_gigante.png"/>
<p>Sirai Gigante</p>
</div>
<div class="card">
<img alt="sulcitano.png" src="sulcitano.png"/>
<p>Sulcitano</p>
</div>
<div class="card">
<img alt="vecchio_capraro.png" src="vecchio_capraro.png"/>
<p>Vecchio Capraro</p>
</div>
</div>
</section>
<section class="section" id="shop" style="display: none;">
<h4>üßÄ ü•ì  Shop</h4>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px;">
<div class="product-card product">
<img src="nuraghe.png" style="width:100%;border-radius:8px;"/><h4>Nuraghe</h4>
<input class="peso-forma" data-product="Nuraghe" type="hidden" value="5"/><p>Pecorino stagionato dal gusto intenso, prodotto con latte ovino.</p>
<div class="scelte-formati"></div>
</div>
<div class="product-card product">
<img src="sirai_gigante.png" style="width:100%;border-radius:8px;"/><h4>Sirai Gigante</h4>
<input class="peso-forma" data-product="Sirai Gigante" type="hidden" value="5"/><p>Formaggio a lunga stagionatura, pasta dura, sapore ricco.</p>
<div class="scelte-formati"></div>
</div>
<div class="product-card product">
<img src="cuore.png" style="width:100%;border-radius:8px;"/><h4>Cuore del Sulcis</h4>
<input class="peso-forma" data-product="Cuore del Sulcis" type="hidden" value="5"/><p>Pecorino semistagionato, dal cuore morbido e sapore equilibrato.</p>
<div class="scelte-formati"></div>
</div>
<div class="product-card product">
<img src="cuor_di_latte.png" style="width:100%;border-radius:8px;"/><h4>Cuor di Latte</h4>
<input class="peso-forma" data-product="Cuor di Latte" type="hidden" value="5"/><p>Formaggio fresco e dolce, perfetto per spalmare o accompagnare miele.</p>
<div class="scelte-formati"></div>
</div>
<div class="product-card product">
<img src="vecchio_capraro.png" style="width:100%;border-radius:8px;"/><h4>Vecchio Capraro</h4>
<input class="peso-forma" data-product="Vecchio Capraro" type="hidden" value="5"/><p>Caprino stagionato, forte e aromatico, 100% latte di capra.</p>
<div class="scelte-formati"></div>
</div>
<div class="product-card product">
<img src="crablu.png" style="width:100%;border-radius:8px;"/><h4>Crablu</h4>
<input class="peso-forma" data-product="Crablu" type="hidden" value="5"/><p>Formaggio erborinato con venature blu, sapore deciso e complesso.</p>
<div class="scelte-formati"></div>
</div>
<div class="product-card product">
<img src="sulcitano.png" style="width:100%;border-radius:8px;"/><h4>Sulcitano</h4>
<input class="peso-forma" data-product="Sulcitano" type="hidden" value="5"/><p>Pecorino fresco tipico del Sulcis, ideale da tavola.</p>
<div class="scelte-formati"></div>
</div>
<div class="product-card product">
<img src="provola_orotelli.png" style="width:100%;border-radius:8px;"/><h4>Provola di Orotelli</h4>
<input class="peso-forma" data-product="Provola di Orotelli" type="hidden" value="5"/><p>Formaggio affumicato, dalla crosta dorata e pasta filante.</p>
<div class="scelte-formati"></div>
</div>
<div class="product-card product">
<img src="gran_sirai.png" style="width:100%;border-radius:8px;"/><h4>Gran Sirai</h4>
<input class="peso-forma" data-product="Gran Sirai" type="hidden" value="11"/><p>Formaggio a pasta dura e lunga stagionatura, per grattugia o tavola.</p>
<div class="scelte-formati"></div>
</div>
<div class="product-card product">
<img src="biancoarrosto.png" style="width:100%;border-radius:8px;"/><h4>Biancoarrosto del Sulcis</h4>
<input class="peso-forma" data-product="Biancoarrosto del Sulcis" type="hidden" value="5"/><p>Formaggio bianco da griglia, dal sapore pieno e leggero.</p>
<div class="scelte-formati"></div>
</div>
</div>
</section>
</main>
<footer>
<p>¬© 2025 ZARA FORMAGGI di Zara Maurizio - Tutti i diritti riservati</p>
</footer>
<!-- Leaflet JS -->
<script src="https://www.paypal.com/sdk/js?client-id=sb¬§cy=EUR"></script>
<script>
      function prepareOrder() {
        let content = "";
        cart.forEach(item => {
          content += `${item.name} x${item.quantity} (‚Ç¨${(item.price * item.quantity).toFixed(2)})\n`;
        });
        document.getElementById("ordine-dettaglio").value = content;
      }

      paypal.Buttons({
        createOrder: function(data, actions) {
          const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0).toFixed(2);
          return actions.order.create({
            purchase_units: [{
              amount: { value: total }
            }]
          });
        },
        onApprove: function(data, actions) {
          return actions.order.capture().then(function(details) {
            alert('Pagamento completato da ' + details.payer.name.given_name);
            prepareOrder();
            document.getElementById("checkout-form").submit();
          });
        }
      }).render('#paypal-button-container');
    </script>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const cards = document.querySelectorAll('.card-overlay');
  cards.forEach(card => {
    card.addEventListener('click', function (e) {
      const infoBox = this.querySelector('.info');
      const alreadyVisible = infoBox.style.opacity === '1';
      // Nascondi tutte le info
      document.querySelectorAll('.card-overlay .info').forEach(i => i.style.opacity = '0');
      // Mostra solo se non gi√† visibile
      if (!alreadyVisible) {
        infoBox.style.opacity = '1';
        e.stopPropagation();
      }
    });
  });
  document.body.addEventListener('click', function () {
    document.querySelectorAll('.card-overlay .info').forEach(i => i.style.opacity = '0');
  });
});
</script>
<script>
function aggiornaPesoGenerico(selectId, labelId) {
  const pesoTesto = {
    "0.125": "1/8 di forma = circa 500g",
    "0.25":  "1/4 di forma = circa 1kg",
    "0.5":   "1/2 forma = circa 2kg",
    "1":     "1 forma intera = circa 4kg"
  };
  const valore = document.getElementById(selectId).value;
  document.getElementById(labelId).innerText = pesoTesto[valore];
}
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const sections = ["formaggi", "salumi", "altri-prodotti"];
  const navLinks = document.querySelectorAll(".menu-prodotti a");

  function highlightSection() {
    let scrollY = window.pageYOffset;
    sections.forEach(id => {
      const section = document.getElementById(id);
      if (section && scrollY >= section.offsetTop - 60) {
        navLinks.forEach(link => link.classList.remove("active"));
        const activeLink = document.querySelector(`.menu-prodotti a[href="#${id}"]`);
        if (activeLink) activeLink.classList.add("active");
      }
    });
  }

  window.addEventListener("scroll", highlightSection);
});
</script>
<style>
.indicatore-tacche .tacca {
  transition: background-color 0.3s ease;
}
.indicatore-tacche[data-disp*='low'] .tacca.attiva {
  background-color: red;
}

.menu-prodotti a.active {
  font-weight: bold;
  text-decoration: underline;
  color: #c00;
}
</style>
<script>
function inviaOrdine() {
  let total = 0;
  cart.forEach(item => total += item.price * item.quantity);
  if (document.getElementById("confezione-regalo")?.checked) total += 5;
  if (document.getElementById("sottovuoto")?.checked) total += 0.5;

  const europa = document.getElementById("destinazione-europa")?.checked;
  const minimo = europa ? 140 : 90;

  if (total < minimo) {
    alert("L'ordine minimo √® di ‚Ç¨" + minimo.toFixed(2) + (europa ? " per l'Europa." : " per l'Italia."));
    return false;
  }

  mostraRiepilogoOrdine();
  return false;
}
</script>
<section id="riepilogo-ordine" style="display:none; margin-top: 40px;">
<h2>üßæ Riepilogo Ordine</h2>
<div id="riepilogo-dettagli" style="margin-bottom: 20px;"></div>
<button onclick="finalizzaOrdine()">Conferma e Invia Ordine</button>
</section>
<script>
function mostraRiepilogoOrdine() {
  const div = document.getElementById("riepilogo-dettagli");
    const imageMap = {
    "nuraghe": "img/nuraghe.png",
    "sirai gigante": "img/sirai_gigante.png",
    "cuore del sulcis": "img/cuore_sulcis.png",
    "cuor di latte": "img/cuor_di_latte.png",
    "vecchio capraro": "img/vecchio_capraro.png",
    "crablu": "img/crablu.png",
    "sulcitano": "img/sulcitano.png",
    "provola di orotelli": "img/provola_orotelli.png",
    "gran sirai": "img/gran_sirai.png",
    "biancoarrosto del sulcis": "img/biancoarrosto.png"
  };
  let html = "<ul>";
  let total = 0;
  cart.forEach(item => {
    const subtot = item.price * item.quantity;
    total += subtot;
    const nome = item.name.toLowerCase().replace(/\s/g, "_").replace(/[^a-z0-9_]/g, "");
    const imgSrc = `img/${nome}.png`;
    html += `<li><img src="${imgSrc}" alt="${item.name}" style="height:40px; vertical-align:middle; margin-right:10px; border-radius:4px;"> ${item.name} x${item.quantity} = ‚Ç¨${subtot.toFixed(2)}</li>`;
  });
  if (document.getElementById("confezione-regalo")?.checked) {
    html += "<li>Confezione regalo = ‚Ç¨5.00</li>";
    total += 5;
  }
  if (document.getElementById("sottovuoto")?.checked) {
    html += "<li>Sottovuoto = ‚Ç¨0.50</li>";
    total += 0.5;
  }
  html += `</ul><strong>Totale: ‚Ç¨${total.toFixed(2)}</strong>`;
  div.innerHTML = html;
  document.getElementById("riepilogo-ordine").style.display = "block";
}

function finalizzaOrdine() {
  alert("Ordine confermato! Grazie per l'acquisto.");
  location.reload();  // simula invio e reset
}
</script>
<section class="section" id="carrello" style="display: none;">
<h2>üõí Il tuo carrello</h2>
<div id="cart-container"></div>
<div id="peso-totale" style="margin-top: 10px; font-weight: bold;"></div>
<div style="margin-top: 20px;">

<button onclick="proseguiOrdine()" style="margin-left: 20px;">Procedi all'acquisto</button>
</div>
<h3 style="text-align:right;">Totale: <span id="carrello-totale">‚Ç¨0.00</span></h3></section>
<section class="section" id="form-ordine" style="display: none;">
<h2>Dati per la spedizione</h2>
<form action="https://formspree.io/f/xpwrplgn" method="POST">
<label for="nome">Nome:</label><br/>
<input id="nome" name="nome" required="" type="text"/><br/>
<label for="indirizzo">Indirizzo:</label><br/>
<input id="indirizzo" name="indirizzo" required="" type="text"/><br/>
<label for="citt√†">Citt√†:</label><br/>
<input id="citt√†" name="citt√†" required="" type="text"/><br/>
<label for="cap">CAP:</label><br/>
<input id="cap" name="cap" required="" type="text"/><br/>
<label for="telefono">Telefono:</label><br/>
<input id="telefono" name="telefono" required="" type="text"/><br/>
<label for="note">Note (facoltative):</label><br/>
<textarea id="note" name="note"></textarea><br/>
<button style="margin-top: 10px;" type="submit">üì¶ Conferma Ordine</button>
</form>
</section>
<script>
let cart = [];

function addToCart(name, qtyLabel, price, pesoUnitario) {
  cart.push({ name, qtyLabel, price, quantity: 1, pesoUnitario });
  updateCart();
}

function updateCart() {
  const sidebarContainer = document.getElementById("cart-sidebar-container");
  const pesoSidebar = document.getElementById("peso-sidebar");
  if (sidebarContainer) sidebarContainer.innerHTML = "";

  // Sincronizza con sidebar
  const sidebarList = document.getElementById("cart-items");
  const sidebarTotal = document.getElementById("cart-sidebar-total");
  const floatingTotal = document.getElementById("floating-total");
  if (sidebarList && sidebarTotal && floatingTotal) {
    sidebarList.innerHTML = "";
    let total = 0;
    cart.forEach(item => {
      const li = document.createElement("li");
      const subtot = item.price * item.quantity;
      total += subtot;
      li.textContent = `${item.name} x${item.quantity} - ‚Ç¨${subtot.toFixed(2)}`;
      sidebarList.appendChild(li);
    });
    sidebarTotal.textContent = "‚Ç¨" + total.toFixed(2);
    floatingTotal.textContent = "‚Ç¨" + total.toFixed(2);
  }

  const pesoKgMap = {
    "1/8": 0.5,
    "1/4": 1.0,
    "1/2": 2.0,
    "1":   4.0
  };

  const pesoStimato = {
    "1/8": "‚âà 500g",
    "1/4": "‚âà 1kg",
    "1/2": "‚âà 2kg",
    "1":   "‚âà 4kg"
  };

  const cartContainer = document.getElementById("cart-container");
  const cartTotal = document.getElementById("cart-total");
  let total = 0;
  cartContainer.innerHTML = "";

  cart.forEach((item, i) => {
    if (sidebarContainer) {
      const pesoMap = { "1/8": "‚âà 500g", "1/4": "‚âà 1kg", "1/2": "‚âà 2kg", "1": "‚âà 4kg" };
      const divSidebar = document.createElement("div");
      divSidebar.style = "padding: 10px; border-bottom: 1px solid #ccc;";
      divSidebar.innerHTML = `
        <strong>${item.name}</strong><br>
        Formato: ${item.qtyLabel} (${pesoMap[item.qtyLabel] || ""}) ‚Äì Quantit√†: 
        <button onclick="decrementItem(${i})">-</button> 
        ${item.quantity} 
        <button onclick="incrementItem(${i})">+</button><br>
        Prezzo: ‚Ç¨${(item.price * item.quantity).toFixed(2)}
        <button onclick="removeItem(${i})" style="margin-left: 10px;">Rimuovi</button>
      `;
      sidebarContainer.appendChild(divSidebar);
    }

    const div = document.createElement("div");
    div.style = "padding: 10px; border-bottom: 1px solid #ccc;";
    div.innerHTML = `
      <strong>${item.name}</strong><br>
      Formato: ${item.qtyLabel} (${pesoStimato[item.qtyLabel] || ""}) ‚Äì Quantit√†: 
      <button onclick="decrementItem(${i})">-</button> 
      ${item.quantity} 
      <button onclick="incrementItem(${i})">+</button><br>
      Prezzo: ‚Ç¨${(item.price * item.quantity).toFixed(2)}
      <button onclick="removeItem(${i})" style="margin-left: 10px;">Rimuovi</button>
    `;
    cartContainer.appendChild(div);
    total += item.price * item.quantity;
  });

  cartTotal.innerText = "Totale: ‚Ç¨" + total.toFixed(2);

  const countEl = document.getElementById("menu-cart-count");
  const totalEl = document.getElementById("menu-cart-total");
  if (countEl && totalEl) {
    countEl.innerText = cart.reduce((sum, item) => sum + item.quantity, 0);
    totalEl.innerText = total.toFixed(2);
  }

  const fixedBtn = document.getElementById("cart-button");
  if (fixedBtn) {
    fixedBtn.innerText = `üõí Carrello (${cart.length}) ‚Äì Totale: ‚Ç¨${total.toFixed(2)}`;
  }

  const bottomTotal = document.getElementById("carrello-totale");
  if (bottomTotal) {
    bottomTotal.innerText = "‚Ç¨" + total.toFixed(2);
  }


  let pesoTotaleKg = 0;
  cart.forEach(item => {
    const pesoKg = pesoKgMap[item.qtyLabel] || 0;
    pesoTotaleKg += pesoKg * item.quantity;
  });
  const pesoTotDiv = document.getElementById("peso-totale");
  if (pesoTotDiv) {
    pesoTotDiv.innerText = "Peso totale: " + pesoTotaleKg.toFixed(2) + " kg";
  }
  if (pesoSidebar) pesoSidebar.innerText = "Peso totale: " + pesoTotaleKg.toFixed(2) + " kg";

}

function removeItem(index) {
  cart.splice(index, 1);
  updateCart();
}

function proseguiOrdine() {
  document.getElementById("form-ordine").style.display = "block";
  document.getElementById("form-ordine").scrollIntoView({ behavior: 'smooth' });
}

function submitOrdine(event) {
  event.preventDefault();
  alert("Ordine inviato! Grazie per l'acquisto.");
  cart = [];
  updateCart();
  document.getElementById("form-ordine").style.display = "none";
}
</script>
<script>

function incrementItem(index) {
  cart[index].quantity += 1;
  updateCart();
}

function decrementItem(index) {
  if (cart[index].quantity > 1) {
    cart[index].quantity -= 1;
  } else {
    cart.splice(index, 1); // rimuove l'elemento se quantit√† scende sotto 1
  }
  updateCart();
}


function aggiungiShop(nome, selectId) {
  const sel = document.getElementById(selectId);
  if (!sel) return;
  const formato = sel.value;
  const prezzo = parseFloat(sel.options[sel.selectedIndex].dataset.price);
  const pesoUnitario = parseFloat(sel.options[sel.selectedIndex].dataset.pesounitario);
  addToCart(nome, formato, prezzo, pesoUnitario);
}
</script>
<script>
function inviaOrdineEmail() {
  const messaggio = generaMessaggioOrdine();
  const mailtoLink = `mailto:titolare@email.it?subject=Nuovo Ordine Zara&body=${encodeURIComponent(messaggio)}`;
  window.location.href = mailtoLink;
}

function inviaOrdineWhatsApp() {
  let nome = document.getElementById("nome2")?.value || "";
  let indirizzo = document.getElementById("indirizzo2")?.value || "";
  let citt√† = document.getElementById("citt√†2")?.value || "";
  let cap = document.getElementById("cap2")?.value || "";
  let telefono = document.getElementById("telefono2")?.value || "";
  let note = document.getElementById("note2")?.value || "";

  let msg = `üßÄ ü•ìOrdine Zara Formaggi:%0A`;
  msg += `üë§ ${nome}%0Aüìç ${indirizzo}, ${cap} ${citt√†}%0Aüìû ${telefono}%0Aüìù Note: ${note}%0A%0A`;

  cart.forEach(item => {
    const subtot = (item.price * item.quantity).toFixed(2);
    const peso = (item.pesoUnitario * item.quantity).toFixed(2);
    msg += `‚Ä¢ ${item.name} (${item.qtyLabel}) x${item.quantity} - ‚Ç¨${subtot} - ${peso} kg%0A`;
  });

  const totale = cart.reduce((sum, i) => sum + i.price * i.quantity, 0).toFixed(2);
  const pesoTot = cart.reduce((sum, i) => sum + i.pesoUnitario * i.quantity, 0).toFixed(2);
  msg += `%0Aüì¶ Totale: ‚Ç¨${totale} - Peso: ${pesoTot} kg`;

  const url = "https://wa.me/393333333333?text=" + encodeURIComponent(msg);
  window.open(url, "_blank");
(link, '_blank');
}

function generaMessaggioOrdine() {
  let messaggio = "üßÄ *Nuovo ordine Zara Formaggi*\n\n";
  cart.forEach((item, i) => {
    if (sidebarContainer) {
      const pesoMap = { "1/8": "‚âà 500g", "1/4": "‚âà 1kg", "1/2": "‚âà 2kg", "1": "‚âà 4kg" };
      const divSidebar = document.createElement("div");
      divSidebar.style = "padding: 10px; border-bottom: 1px solid #ccc;";
      divSidebar.innerHTML = `
        <strong>${item.name}</strong><br>
        Formato: ${item.qtyLabel} (${pesoMap[item.qtyLabel] || ""}) ‚Äì Quantit√†: 
        <button onclick="decrementItem(${i})">-</button> 
        ${item.quantity} 
        <button onclick="incrementItem(${i})">+</button><br>
        Prezzo: ‚Ç¨${(item.price * item.quantity).toFixed(2)}
        <button onclick="removeItem(${i})" style="margin-left: 10px;">Rimuovi</button>
      `;
      sidebarContainer.appendChild(divSidebar);
    }

    messaggio += `‚Ä¢ ${item.name} - ${item.qtyLabel} - ‚Ç¨${item.price.toFixed(2)}\n`;
  });

  const totale = cart.reduce((sum, item) => sum + item.price, 0);
  messaggio += `\nüí∂ Totale: ‚Ç¨${totale.toFixed(2)}\n\n`;

  messaggio += "üì¶ Dati cliente:\n";
  messaggio += `Nome: ${document.getElementById("nome").value}\n`;
  messaggio += `Cognome: ${document.getElementById("cognome").value}\n`;
  messaggio += `Email: ${document.getElementById("email").value}\n`;
  messaggio += `Telefono: ${document.getElementById("telefono").value}\n`;
  messaggio += `Indirizzo: ${document.getElementById("indirizzo").value}, ${document.getElementById("cap").value}, ${document.getElementById("citta").value}, ${document.getElementById("paese").value}`;
  return messaggio;
}
</script>
<script>
function mostraSezione(id) {
  document.querySelectorAll(".section").forEach(sec => {
    sec.classList.remove("active");
    sec.style.display = "none";
  });
  const sezioneAttiva = document.getElementById(id);
  if (sezioneAttiva) {
    sezioneAttiva.classList.add("active");
    sezioneAttiva.style.display = "block";
    if (id === 'carrello') aggiornaCarrello?.();
  }
}
document.addEventListener("DOMContentLoaded", () => {
  const hash = window.location.hash.replace("#", "") || "home";
  mostraSezione(hash);
  document.querySelectorAll("nav a").forEach(link => {
    link.addEventListener("click", e => {
      e.preventDefault();
      const id = link.getAttribute("href").replace("#", "");
      history.pushState(null, "", `#${id}`);
      mostraSezione(id);
    });
  });
});
</script>
<script>
function toggleRitiroNegozio() {
  const ritiroCheckbox = document.querySelector('input[name="Ritiro in loco"]');
  const btn = document.getElementById("btn-ritiro");
  if (!ritiroCheckbox || !btn) return;
  const attivo = ritiroCheckbox.checked = !ritiroCheckbox.checked;
  btn.innerText = attivo ? "‚úÖ Ritiro in Negozio Attivo" : "üö∂‚Äç‚ôÇÔ∏è Attiva Ritiro in Negozio";
  btn.style.backgroundColor = attivo ? "#4caf50" : "#2f4f2f";
}
</script>
<link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  let mapInitialized = false;
  let map;

  function showSection(id) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(id)?.classList.add('active');

    if (id === 'dove') {
      if (!mapInitialized) {
        const coords = [39.3117602, 8.5351056];
        map = L.map('map').setView(coords, 18);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '¬© OpenStreetMap contributors'
        }).addTo(map);
        L.marker(coords).addTo(map).bindPopup(
          'Zara Formaggi Box n¬∞27<br>Via Gramsci, Mercato Civico - Iglesias, Sardegna'
        ).openPopup();
        mapInitialized = true;
      } else {
        setTimeout(() => map.invalidateSize(), 200);
      }
    }
  }

  window.addEventListener("DOMContentLoaded", () => showSection("dove"));
</script>
<!-- Sidebar carrello COMPLETA -->
<div id="cart-sidebar" style="position:fixed;top:0;right:-400px;width:350px;height:100%;background:#fff;border-left:2px solid #ccc;box-shadow:-2px 0 5px rgba(0,0,0,0.1);z-index:9999;padding:1rem;transition:right 0.3s;overflow-y:auto;">
<button onclick="toggleCartSidebar()" style="margin-top:10px;">Chiudi</button><button onclick="svuotaCarrello()" style="background:#c00;color:white;padding:8px 12px;border:none;border-radius:5px;">üßπ Svuota</button><h3>üõí Il tuo carrello</h3>
<div id="cart-sidebar-container"></div>
<div id="peso-sidebar" style="margin-top:10px;font-weight:bold;"></div>
<div id="cart-sidebar-total" style="font-weight: bold; margin-top: 10px;">Totale: ‚Ç¨0.00</div>
</div>
<script>
  function toggleCartSidebar() {
    const sidebar = document.getElementById("cart-sidebar");
    sidebar.style.right = sidebar.style.right === "0px" ? "-400px" : "0px";
  }
</script>
<script>
const disponibilitaProdotti = {
  "Nuraghe": {"1/8":10,"1/4":10,"1/2":10,"1":10},
  "Sirai Gigante": {"1/8":10,"1/4":10,"1/2":10,"1":10},
  "Cuore del Sulcis": {"1/8":10,"1/4":10,"1/2":10,"1":10},
  "Cuor di Latte": {"1/8":10,"1/4":10,"1/2":10,"1":10},
  "Vecchio Capraro": {"1/8":10,"1/4":10,"1/2":10,"1":10},
  "Crablu": {"1/8":10,"1/4":10,"1/2":10,"1":10},
  "Sulcitano": {"1/8":10,"1/4":10,"1/2":10,"1":10},
  "Provola di Orotelli": {"1/8":10,"1/4":10,"1/2":10,"1":10},
  "Gran Sirai": {"1/32":10,"1/16":10,"1/8":10,"1/4":10,"1/2":10,"1":10},
  "Biancoarrosto del Sulcis": {"1/8":10,"1/4":10,"1/2":10,"1":10}
};

const prezziProdotti = {
  "Nuraghe": { "1/8": 8.00, "1/4": 15.00, "1/2": 28.00, "1": 55.00 },
  "Sirai Gigante": { "1/8": 9.00, "1/4": 17.00, "1/2": 32.00, "1": 62.00 },
  "Cuore del Sulcis": { "1/8": 9.50, "1/4": 18.50, "1/2": 35.00, "1": 70.00 },
  "Cuor di Latte": { "1/8": 7.50, "1/4": 14.50, "1/2": 27.00, "1": 52.00 },
  "Vecchio Capraro": { "1/8": 10.00, "1/4": 19.00, "1/2": 37.00, "1": 72.00 },
  "Crablu": { "1/8": 9.20, "1/4": 17.80, "1/2": 34.00, "1": 66.00 },
  "Sulcitano": { "1/8": 8.80, "1/4": 16.70, "1/2": 31.50, "1": 60.00 },
  "Provola di Orotelli": { "1/8": 8.90, "1/4": 17.10, "1/2": 32.00, "1": 61.00 },
  "Gran Sirai": { "1/32": 2.50, "1/16": 5.00, "1/8": 9.80, "1/4": 18.80, "1/2": 36.00, "1": 72.00 },
  "Biancoarrosto del Sulcis": { "1/8": 8.30, "1/4": 15.90, "1/2": 30.00, "1": 58.00 }
};


document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".product").forEach(prod => {
    const nome = prod.querySelector(".peso-forma")?.dataset.product;
    const pesoForma = parseFloat(prod.querySelector(".peso-forma")?.value || 5);
    const contenitore = prod.querySelector(".scelte-formati");
    if (!nome || !contenitore) return;

    const frazioni = Object.keys(disponibilitaProdotti[nome] || {});
    const prezzi = {};
    prod.querySelectorAll("option")?.forEach(opt => {
      prezzi[opt.value] = parseFloat(opt.dataset.price);
    });

    contenitore.innerHTML = "";
    frazioni.forEach(frazione => {
      const disponibilita = disponibilitaProdotti[nome][frazione];
      const frazMap = { "1/32":1/32, "1/16":1/16, "1/8":1/8, "1/4":1/4, "1/2":1/2, "1":1 };
      const peso = (pesoForma * (frazMap[frazione] || 0)).toFixed(2);
      const prezzo = (prezziProdotti[nome]?.[frazione] ?? "-");

      const btn = document.createElement("button");
      btn.textContent = `${frazione} ‚Äì ‚Ç¨${prezzo} ‚Äì ${peso} kg ‚Äì Qta disponibile: ${disponibilita}`;
      btn.disabled = disponibilita <= 0;
      btn.style = "margin:4px;padding:6px 10px;font-size:14px;border-radius:6px;cursor:pointer;";
      btn.onclick = () => {
        addToCart(nome, frazione, prezzo, parseFloat(peso));
        disponibilitaProdotti[nome][frazione]--;
        btn.disabled = disponibilitaProdotti[nome][frazione] <= 0;
        btn.textContent = `${frazione} ‚Äì ‚Ç¨${prezzo} ‚Äì ${peso} kg ‚Äì Qta disponibile: ${disponibilitaProdotti[nome][frazione]}`;
      };

      contenitore.appendChild(btn);
    });
  });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".product").forEach(prod => {
    const nome = prod.querySelector(".peso-forma")?.dataset.product;
    const pesoForma = parseFloat(prod.querySelector(".peso-forma")?.value || 5);
    const contenitore = prod.querySelector(".scelte-formati");
    if (!nome || !contenitore) return;

    const frazioni = Object.keys(disponibilitaProdotti[nome] || {});
    contenitore.innerHTML = "";

    frazioni.forEach(frazione => {
      const disponibilita = disponibilitaProdotti[nome][frazione];
      const frazMap = { "1/32":1/32, "1/16":1/16, "1/8":1/8, "1/4":1/4, "1/2":1/2, "1":1 };
      const peso = (pesoForma * (frazMap[frazione] || 0)).toFixed(2);
      const prezzo = prezziProdotti[nome]?.[frazione] ?? "-";

      const wrapper = document.createElement("div");
      wrapper.style.marginBottom = "10px";

      const btn = document.createElement("button");
      btn.textContent = `${frazione} ‚Äì ‚Ç¨${prezzo} ‚Äì ${peso} kg ‚Äì Qta disponibile: ${disponibilita}`;
      btn.disabled = disponibilita <= 0;
      btn.style = "margin:4px;padding:6px 10px;font-size:14px;border-radius:6px;cursor:pointer;";
      wrapper.appendChild(btn);

      const taccheContainer = document.createElement("div");
      taccheContainer.className = "indicatore-tacche";
      taccheContainer.dataset.disp = disponibilita <= 3 ? 'low' : 'ok';
      const percentuale = Math.round((disponibilita / 10) * 100);
      const percentSpan = document.createElement("span");
      percentSpan.textContent = ` ${percentuale}%`;
      percentSpan.style = "margin-left: 6px; font-weight: bold;";
      taccheContainer.appendChild(percentSpan);
      for (let i = 0; i < 10; i++) {
        const tacca = document.createElement("div");
        tacca.className = "tacca" + (i < disponibilita ? " attiva" : "");
        taccheContainer.appendChild(tacca);
      }
      wrapper.appendChild(taccheContainer);
      contenitore.appendChild(wrapper);

      btn.onclick = () => {
        addToCart(nome, frazione, prezzo, parseFloat(peso));
        disponibilitaProdotti[nome][frazione]--;
        btn.disabled = disponibilitaProdotti[nome][frazione] <= 0;
        btn.textContent = `${frazione} ‚Äì ‚Ç¨${prezzo} ‚Äì ${peso} kg ‚Äì Qta disponibile: ${disponibilitaProdotti[nome][frazione]}`;
        const tacche = taccheContainer.querySelectorAll(".tacca");
        tacche.forEach((t, i) => {
          t.classList.toggle("attiva", i < disponibilitaProdotti[nome][frazione]);
        });
        taccheContainer.dataset.disp = disponibilitaProdotti[nome][frazione] <= 3 ? 'low' : 'ok';
        taccheContainer.querySelector("span").textContent = ` ${Math.round((disponibilitaProdotti[nome][frazione] / 10) * 100)}%`;
      };
    });
  });
});
</script>
<!-- Selettore modalit√† consegna -->
<div style="text-align:center; margin-top:2rem;">
  <button onclick="toggleRitiro()" id="btn-toggle-ritiro" style="padding: 10px 20px; font-weight: bold; border-radius: 8px; background-color: #007f5f; color: white; border: none; cursor: pointer;">
    üöö Clicca per ritiro in negozio
  </button>
</div>

<!-- Form ordine completo -->
<form id="form-completo" style="margin-top:2rem;">
  <h2>Dati per la spedizione</h2>
  <label>Nome: <input name="nome" required></label><br>
  <label>Cognome: <input name="cognome" required></label><br>
  <label>Telefono: <input name="telefono" required></label><br>
  <label>Email: <input name="email" required></label><br>
  <label>Indirizzo: <input name="indirizzo" required></label><br>
  <label>CAP: <input name="cap" required></label><br>
  <label>Citt√†: <input name="citta" required></label><br>
  <label>Paese: <input name="paese" required></label><br>
</form>

<!-- Form ritiro in negozio -->
<form id="form-ritiro" style="display:none; margin-top:2rem;">
  <h2>Dati per il ritiro in negozio</h2>
  <label>Nome: <input name="nome" required></label><br>
  <label>Cognome: <input name="cognome" required></label><br>
  <label>Telefono: <input name="telefono" required></label><br>
  <label>Email: <input name="email" required></label><br>
</form>

<!-- Pulsante WhatsApp -->
<div style="margin-top: 1rem; text-align:center;">
  <a href="#" onclick="inviaOrdineWhatsapp()" id="wa-btn" style="background-color: #25d366; color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; font-weight: bold;">
    üì¶ Invia Ordine via WhatsApp
  </a>
</div>


<script>
function toggleRitiro() {
  const btn = document.getElementById("btn-toggle-ritiro");
  const completo = document.getElementById("form-completo");
  const ritiro = document.getElementById("form-ritiro");
  const attivo = ritiro.style.display === "block";

  if (attivo) {
    ritiro.style.display = "none";
    completo.style.display = "block";
    btn.textContent = "üöö Clicca per ritiro in negozio";
  } else {
    ritiro.style.display = "block";
    completo.style.display = "none";
    btn.textContent = "üè¨ Modalit√† ritiro attiva";
  }
}

function inviaOrdineWhatsapp() {
  let dati = "";
  const form = document.getElementById("form-ritiro").style.display === "block"
    ? document.getElementById("form-ritiro")
    : document.getElementById("form-completo");

  const inputs = form.querySelectorAll("input");
  inputs.forEach(input => {
    dati += `${input.name}: ${input.value}%0A`;
  });

  // Inserisce un messaggio simulato ordine (qui puoi espandere con carrello reale)
  const messaggio = `*Nuovo ordine ricevuto*%0A${dati}`;
  const link = `https://wa.me/?text=${encodeURIComponent(messaggio)}`;
  window.open(link, '_blank');
}
</script>


<!-- Invio ordine via Formspree -->
<div style="text-align:center; margin-top: 1rem;">
  <button type="button" onclick="inviaOrdineFormspree()" style="background-color: #004080; color: white; padding: 10px 20px; border-radius: 6px; font-weight: bold; border: none;">
    üìß Invia Ordine via Email
  </button>
</div>
<form id="form-invio" action="https://formspree.io/f/xpwrplgn" method="POST" style="display:none;"></form>


<script>
function inviaOrdineFormspree() {
  const form = document.getElementById("form-ritiro").style.display === "block"
    ? document.getElementById("form-ritiro")
    : document.getElementById("form-completo");
  const inputs = form.querySelectorAll("input");
  const targetForm = document.getElementById("form-invio");
  targetForm.innerHTML = "";

  inputs.forEach(input => {
    const hidden = document.createElement("input");
    hidden.name = input.name;
    hidden.value = input.value;
    hidden.type = "hidden";
    targetForm.appendChild(hidden);
  });

  // Simulazione carrello per invio (espandibile)
  const prodotti = [];
  document.querySelectorAll(".product").forEach(prod => {
    const nome = prod.querySelector(".peso-forma")?.dataset.product;
    const blocchi = prod.querySelectorAll(".scelte-formati button");
    blocchi.forEach(btn => {
      if (btn.disabled && btn.textContent.includes("Qta disponibile: 0") === false) {
        prodotti.push(btn.textContent);
      }
    });
  });

  const ordine = document.createElement("input");
  ordine.type = "hidden";
  ordine.name = "Ordine";
  ordine.value = prodotti.join(" | ");
  targetForm.appendChild(ordine);

  targetForm.submit();
}
</script>


<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".product-card").forEach(prod => {
    const nome = prod.querySelector(".peso-forma")?.dataset.product;
    const pesoForma = parseFloat(prod.querySelector(".peso-forma")?.value || 5);
    const contenitore = prod.querySelector(".scelte-formati");
    if (!nome || !contenitore) return;

    const frazioni = Object.keys(disponibilitaProdotti[nome] || {});
    contenitore.querySelectorAll("button").forEach(btn => {
      const testo = btn.textContent;
      const match = testo.match(/^([\d/]+).*‚Ç¨([\d\.]+).*([\d\.]+) kg/);
      if (!match) return;
      const [_, formato, prezzo, peso] = match;

      const tooltip = document.createElement("div");
      tooltip.className = "tooltip-text";
      tooltip.innerHTML = `<strong>Formato ${formato}</strong><br>Prezzo: ‚Ç¨${prezzo}<br>Peso medio: ${peso} kg<br>Prodotto: ${nome}`;

      const wrapper = document.createElement("div");
      wrapper.className = "tooltip";
      btn.replaceWith(wrapper);
      wrapper.appendChild(btn);
      wrapper.appendChild(tooltip);
    });
  });
});
</script>

</body>
</html>
<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".product").forEach(prod => {
    const pesoInput = prod.querySelector(".peso-forma");
    const pesoForma = parseFloat(pesoInput?.value || 4);
    const select = prod.querySelector("select");
    if (!select) return;

    select.querySelectorAll("option").forEach(opt => {
      const frazione = opt.value.trim();
      const frazioni = { "1/32": 1/32,"1/16": 1/16,"1/8": 1/8, "1/4": 1/4, "1/2": 1/2, "1": 1 };
      const pesoCalcolato = (pesoForma * (frazioni[frazione] || 0)).toFixed(2);
      const prezzo = opt.dataset.price;
      opt.dataset.pesounitario = pesoCalcolato;
      opt.textContent = `${frazione} - ‚Ç¨${prezzo} (${pesoCalcolato} kg)`;
    });
  });
});
</script>
<script>
function inviaOrdineWhatsApp() {
  let nome = document.getElementById("nome2")?.value || "";
  let indirizzo = document.getElementById("indirizzo2")?.value || "";
  let citt√† = document.getElementById("citt√†2")?.value || "";
  let cap = document.getElementById("cap2")?.value || "";
  let telefono = document.getElementById("telefono2")?.value || "";
  let note = document.getElementById("note2")?.value || "";

  let msg = `üßÄ Ordine Zara Formaggi:%0A`;
  msg += `üë§ ${nome}%0Aüìç ${indirizzo}, ${cap} ${citt√†}%0Aüìû ${telefono}%0Aüìù Note: ${note}%0A%0A`;

  cart.forEach(item => {
    const subtot = (item.price * item.quantity).toFixed(2);
    const peso = (item.pesoUnitario * item.quantity).toFixed(2);
    msg += `‚Ä¢ ${item.name} (${item.qtyLabel}) x${item.quantity} - ‚Ç¨${subtot} - ${peso} kg%0A`;
  });

  const totale = cart.reduce((sum, i) => sum + i.price * i.quantity, 0).toFixed(2);
  const pesoTot = cart.reduce((sum, i) => sum + i.pesoUnitario * i.quantity, 0).toFixed(2);
  msg += `%0Aüì¶ Totale: ‚Ç¨${totale} - Peso: ${pesoTot} kg`;

  const url = "https://wa.me/393333333333?text=" + encodeURIComponent(msg);
  window.open(url, "_blank");
(url, "_blank");
}
</script>
<script>
function preparaRiepilogoOrdine() {
  let nome = document.getElementById("nome2")?.value || "";
  let indirizzo = document.getElementById("indirizzo2")?.value || "";
  let citt√† = document.getElementById("citt√†2")?.value || "";
  let cap = document.getElementById("cap2")?.value || "";
  let telefono = document.getElementById("telefono2")?.value || "";
  let note = document.getElementById("note2")?.value || "";

  let riepilogo = `üßÄ Ordine Zara Formaggi:
`;
  riepilogo += `üë§ ${nome}
üìç ${indirizzo}, ${cap} ${citt√†}
üìû ${telefono}
üìù Note: ${note}

`;

  cart.forEach(item => {
    const subtot = (item.price * item.quantity).toFixed(2);
    const peso = (item.pesoUnitario * item.quantity).toFixed(2);
    riepilogo += `‚Ä¢ ${item.name} (${item.qtyLabel}) x${item.quantity} - ‚Ç¨${subtot} - ${peso} kg
`;
  });

  const totale = cart.reduce((sum, i) => sum + i.price * i.quantity, 0).toFixed(2);
  const pesoTot = cart.reduce((sum, i) => sum + i.pesoUnitario * i.quantity, 0).toFixed(2);
  riepilogo += `
üì¶ Totale: ‚Ç¨${totale} - Peso: ${pesoTot} kg`;

  document.getElementById("riepilogo-ordine").value = riepilogo;

}
</script>
